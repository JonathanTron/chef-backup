#
# Generated by Chef
# ANY EDIT WILL BE LOST ON NEXT RUN
#
Backup::Model.new(<%= @name.to_sym.inspect %><% if @description %>, <%= @description.inspect %><% end %>) do
  <% if @split_into_chunks_of -%>

  split_into_chunks_of <%= @split_into_chunks_of %>
  <% end -%>
  <% @archives.each do |name, options| -%>

  archive <%= name.to_sym.inspect %> do |archive|
    <% if options[:use_sudo] -%>
    archive.use_sudo
    <% end -%>
    <% Array(options[:add]).each do |add| -%>
    archive.add <%= add.inspect %>
    <% end -%>
    <% Array(options[:exclude]).each do |exclude| -%>
    archive.exclude <%= exclude.inspect %>
    <% end -%>
  end
  <% end -%>
  <% @databases.each do |database| -%>

  database <%= database[:kind] %> do |db|
    <% database[:options].each do |key, value| -%>
    db.<%= key %> = <%= value.inspect %>
    <% end -%>
  end
  <% end -%>
  <% if @compress_with -%>

  compress_with <%= @compress_with[:kind] %> do |compression|
    <% if @compress_with[:options] -%>
    <% @compress_with[:options].each do |key, value| -%>
    compression.<%= key %> = <%= value.inspect %>
    <% end -%>
    <% end -%>
  end
  <% end -%>
  <% if @encrypt_with -%>

  encrypt_with <%= @encrypt_with[:kind] %> do |encryption|
    <% @encrypt_with[:options].each do |key, value| -%>
    encryption.<%= key %> = <%= value.inspect %>
    <% end if @encrypt_with[:options] -%>
  end
  <% end -%>
  <% @store_with.each do |store| -%>

  store_with <%= store[:kind] %> do |store|
    <% store[:options].each do |key, value| -%>
    store.<%= key %> = <%= value.inspect %>
    <% end if store[:options] -%>
  end
  <% end -%>
  <% @notify_by.each do |notify| -%>

  notify_by <%= notify[:kind] %> do |notification|
    <% notification[:options].each do |key, value| -%>
    notification.<%= key %> = <%= value.inspect %>
    <% end if notify[:options] -%>
  end
  <% end -%>
end
